<ion-header>
  <ion-navbar color="dark">
    <button ion-button menuToggle>
     <ion-icon name="menu"></ion-icon>
    </button>

    <ion-title> Anjos </ion-title>

  </ion-navbar>
</ion-header>


<ion-content class="trinity" padding>
    <!-- ========= STATUS =========== -->
    <div class="status" (click)="openStatusEmotion()">
      <p> Diga ao seu anjo como está se sentindo: </p>

        <ion-row>
          <div> <img class="emoji" [src]="(overcomerObs | async)?.emotion?.img"> </div>
          <div *ngIf="(overcomerObs | async)?.emotion?.status != 'Normal'">
            <b>Sentindo-se {{ (overcomerObs | async)?.emotion?.status }}</b>
          </div>
          <div *ngIf="(overcomerObs | async)?.emotion?.status  == 'Normal'">
            <b>Escolha algum sentimento</b>
          </div>
        </ion-row>
    </div>

    <!-- ========= USERS CHAT =========== -->
    <div class="chat-user">
      <ion-grid>
        <ion-row [ngClass]="{'text-notification': !(angelNotification | async)?.view}">
          <ion-col width-40 (click)="openChat(overcomer, angel)">
            <div class="avatar angel">
              <img [src]="angel?.avatar" />
            </div>
          </ion-col>

          <ion-col width-40 (click)="openChat(overcomer, angel)">
            <h4> {{ angel?.name }} </h4>
            <div class="message">
              <p *ngIf="!(angel?.lastMessages | async)"> Não há nenhum mensagem disponivel </p>
              <p *ngIf="(angel?.lastMessages | async) && !(angel?.lastMessages | async)?.msg"> O {{ angel?.name }} enviou uma imagem </p>
              <p *ngIf="(angel?.lastMessages | async)?.msg"> {{ (angel?.lastMessages | async)?.msg | truncate:20 }} </p>
              <p *ngIf="(angel?.lastMessages | async)?.created_at" class="hour"> {{ (angel?.lastMessages | async)?.created_at | customDate:"c" }} </p>
            </div>
          </ion-col>

          <ion-col width-20>
            <ion-icon name="md-calendar" (click)="openPublicEvents(angel)"> </ion-icon>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col class="user-archangel">
            <div class="avatar archangel">
              <img [src]="archangel?.avatar" />
            </div>
            <div class="user" (click)="openChat(overcomer, archangel)" [ngClass]="{'second-notification': !(archangelNotification | async)?.view}"> Arcanjo: {{ archangel?.name }} </div>
            <div class="help">Ajuda</div>
          </ion-col>

        </ion-row>
      </ion-grid>
    </div>

</ion-content>
